name: Close solution PRs

on:
  pull_request:
    types: [labeled]

jobs:
  close:
    if: github.event.label.name == 'solution'
    runs-on: ubuntu-slim
    steps:
      - name: Comment on PR
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              body: `
ðŸ‘‹ Thanks for working on the Gilded Rose kata!

This repository intentionally contains badly written code for learning purposes.

We don't accept refactored solutions as pull requests.
Please keep your solution in your fork.

If you intended to contribute documentation, tests, or a new language version, feel free to reopen and explain ðŸ™‚
`
            })

      - name: Close PR
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.pulls.update({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: context.issue.number,
              state: 'closed'
            })

